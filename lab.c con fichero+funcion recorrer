#include "lab.h"

// a será del tamaño, segun la dificultad del laberinto
void ModoFacil(int a, int b) //imprime el laberinto de dimensiones a b que esta en el txt
{

    char facil[20][20]; //dimensiones de la matriz facil (hay que poner las mismas en el bucle para transformar casillas en matriz

    char casilla[10000];
    int g=0, k, i=0, j=0; //las variables i e j las dejamos para la matriz

    FILE *pf;

    pf = fopen("ficherolaberintos.txt", "r");

    if(pf == NULL)
        {
            printf("Error al encontrar el archivo.");
            exit(-1); //mejor poner return -1
        }

    //Esto te recoge todos los datos del fichero caracter por caracter



    while(fscanf(pf, "%c", &casilla[g]) != EOF)
        {
            g++; //Contador de caracteres
        }

    //Esto te imprime el laberinto del fichero

    //Para imprimir una parte del fichero que queramos podemos hacerlo con señales, y asi tener el laberinto que queremos para cada modo



     //Voy a guardar todos estos caracteres en una matriz de dimension facil

     //TRANSFORMA CASILLAS EN MATRIZ

      for(k=0; k<g; k++)
        {
           for (j=0; j<20; j++)

             {
                 facil[i][j+k] = casilla[k+1];

                 i++;
             }
        }

    //Para ver si esta bien imprimimos la matriz

    for (i=0; i<20; i++){
        for (j=0; j<20; j++)
            {
                printf("%c", facil[i][j]);
            }
         printf("\n");}


    fclose(pf);

}

void ModoMedio(int a, int b)
{
    int i,j;

      char laberinto1[20][50] ={
      {"##################################################"},
      {"##o###                                          ##"},
      {"## ###  #################### ##### ############ ##"},
      {"##      #################### ##### ###########  ##"},
      {"#####################        ##### ##########  ###"},
      {"##################### ############ #########  ####"},
      {"##################### ############     ####  #####"},
      {"##                    ################ ###  ######"},
      {"## ################################### ##  #######"},
      {"## ##########    #       #########     ## ########"},
      {"## ########## ##   ##### ######### ######?########"},
      {"##            ######     ######### ###### ########"},
      {"##### ####### ###### #################### ########"},
      {"##### ####### ######                      ########"},
      {"##### #######      ############# #################"},
      {"#####      ##################### #################"},
      {"########## ############          #################"},
      {"########## ############ ######## #################"},
      {"###        ############                          >"},
      {"##################################################"}
      };

      RecorrerLab(laberinto1);
}

void ModoDificil(int a, int b)
{
    int i,j;

      char laberinto1[50][50] ={
      {"##################################################"},
      {"##o######                     ####################"},
      {"## ###### ################### #########       ####"},
      {"##        #####      #######  ######### ##### ####"},
      {"#################### ######  ########## ##### ####"},
      {"#################### #####  ########### ##### ####"},
      {"#################### ####  #######      ##### ####"},
      {"#####                     #######  ########## ####"},
      {"##### ##########################  #### ###### ####"},
      {"##### ########################## ##### ###### ####"},
      {"##    ####                       #####        ####"},
      {"## ####### ############################## ########"},
      {"##         ############################## ########"},
      {"## ################            ########## ########"},
      {"## ###########################            ########"},
      {"## ########################### ###################"},
      {"##                ############ ###################"},
      {"################# ############ ###################"},
      {"################# ############ ####           ####"},
      {"######            ############ #### ######### ####"},
      {"###### ##########?             #### ###   ### ####"},
      {"## ### ############################ ### ##### ####"},
      {"## ###                              ###       ####"},
      {"## ###################### ########################"},
      {"## ###################### ########################"},
      {"##                        ####                ####"},
      {"## ################################## ####### ####"},
      {"## ################################## ####### ####"},
      {"##        ###########           ##### ####### ####"},
      {"######### ########### ######### ##### ####### ####"},
      {"######### ########### ######### ##### ####### ####"},
      {"#########             #########       ####### ####"},
      {"#########?################################### ####"},
      {"######### ################################### ####"},
      {"######### #######                 ##########  ####"},
      {"##        ####### ############## ##########  #####"},
      {"## ############## ############## #########  ######"},
      {"## ############## ############## ########  #######"},
      {"## ####           ############## #######  ########"},
      {"## ############################# ######  #########"},
      {"## ######                               ##########"},
      {"## #########?#####################################"},
      {"##           #####################################"},
      {"############ #####################        ########"},
      {"############  #################### ###### ########"},
      {"#############  ################### ###### ########"},
      {"##############  ################## ######        >"},
      {"###############                    ###############"},
      {"##################################           #####"},
      {"##################################################"},

                           };

   for (i=0; i<50; i++){
        for (j=0; j<50; j++)
            {
                printf("%c", laberinto1[i][j]);
            }
         printf("\n");}
}

void ModoExtremo(int a, int b)
{
    int i,j;

      char laberinto1[50][100] ={
      {"####################################################################################################"},
      {"#o                                                    ###############         ######################"},
      {"#####################################################                 ####### ######           #####"},
      {"##################################################### ####################### ###### ######### #####"},
      {"##     ####                                           ############            ###### ######### #####"},
      {"## ### #### ######################################### ############ ################# ######### #####"},
      {"## ######## #########################################       ###### #################      #### #####"},
      {"##                       ##             ############# ################ ############# ######### #####"},
      {"########################    ########### ############# ################               ######### #####"},
      {"####################################### #############         #############?################## #####"},
      {"#####         ###############           ##################### ############# ################## #####"},
      {"##### ####### ############### ###############################               #######            #####"},
      {"##### ####### ############### ##########              ############################# ################"},
      {"#####    ####                 #### ##### ############ ############################# ################"},
      {"################################## ##### ############                           ### #####       ####"},
      {"################################## #####      ##### ########################### ###       ##### ####"},
      {"##            #################### ########## ##### ########################### ############### ####"},
      {"## ########## #################### ########## ##### #####        ##### ######## ############### ####"},
      {"## ##########                                 ##### ############ ##### ###      ############### ####"},
      {"## ################################?############### ############ ##### ### #################### ####"},
      {"## ################################ ###############              ##### ###                      ####"},
      {"##                  ############### ################################## ############## ##############"},
      {"################### ############### ################################## ############## ##############"},
      {"################### ############### #########                          ######         ####       ###"},
      {"######           ##                           ################# ############# ############ ##### ###"},
      {"###### ######### ############################################## ############# ############ ####  ###"},
      {"###### ######### #############################################  ############# ############ #### ####"},
      {"###### ### ##### ###########                      ###########  ############## ############ #### ####"},
      {"###### ### #####             #################### ##########  ############### ############ ####    #"},
      {"###### ### ################# #################### #########  ################              #########"},
      {"###### ### ################# ###                  ########              ############################"},
      {"###### ###           ####### ### ########################  ############ ############################"},
      {"###### ############# ####### ### #######################  ############# ############################"},
      {"######               ####### ###                         ############## ############################"},
      {"############################ #########################  ############### ############################"},
      {"############################ ########################  #########         ###########################"},
      {"###################### #####                  ######  ########## #############                ######"},
      {"###################### ##################### ######  ########### ############# ############## ######"},
      {"##############         ##################### #####  ############  ############ ############## ######"},
      {"############## #######                       ####  ############## ############      ######### ######"},
      {"############## #################################  ############### ################# ######### ######"},
      {"############## ################################  ################ ################# ######### ######"},
      {"############## ###############################  #####                               ######### ######"},
      {"######                                      ?  ###### ####################################### ######"},
      {"############################################  ####### ########                                ######"},
      {"###########################################  ######## ######## #####################################"},
      {"########################################### ######### ##############################################"},
      {"###########                                 #########                                              >"},
      {"####################################################################################################"},
      {"####################################################################################################"},

                           };

   for (i=0; i<50; i++){
        for (j=0; j<100; j++)
            {
                printf("%c", laberinto1[i][j]);
            }
         printf("\n");}

}

void RecorrerLab(char a[20][50]) //esta funcion es para la matriz de dimensiones genericas
{

    int x, y, i, j;

    char tecla, linea, asterisco;

    linea=219;
    asterisco='#';
    for(i=0;i<50;i++) //PARA INTERCAMBIAR ASTERISCOS
    {
        for(j=0;j<50;j++)
        {
            if(a[i][j]==asterisco)
            {
              a[i][j]=linea;
            }
           //intercambia(&asterisco,&linea);
        }

    }

//aqui hay que imprimir la direccion de memoria ¿?

    do
    {
        printf("mete un punto inicial del plano del laberinto (mayor que 0, menor que los limites del laberinto):\n");
        scanf("%i %i", &x, &y);
    }while(x <= 0 || y <= 0);

    system("cls");//borra la pantalla para que no se acumulen los puntos introducidos

    //imprimimos el laberinto con las condiciones iniciales
        //el 5 es nº de casillas q vemos en vertical
        //el 5 es el nº de casillas q vemos en horizontal
        for(i=x;i<x+4;i++)
        {
            for(j=y;j<y+6;j++)
            {
                printf("%c", a[i-1][j-3]);
            }
            printf("\n");
        }

    //Esto va desplazando la pelota por el laberinto, mientras su posicion sea distinta de los extremos del lab (28 y 18) casillas
    while(x!=28 || y!= 18)  //AQUI HAY QUE GENERALIZARLO
    {
        tecla=getch();//lo mismo que el scanf para caracteres

            //secuencia de movimientos de las teclas
            if(tecla == 's')
                {
                    if(a[x+1][y] != linea)
                    {
                        a[x][y] = ' ';
                        x++;
                        a[x][y]='o';
                    }
                }
            if(tecla == 'w')
                {
                    if(a[x-1][y] != linea)
                    {
                        a[x][y] = ' ';
                        x--;
                        a[x][y]='o';
                    }
                }
            if(tecla == 'd')
                {
                    if(a[x][y+1] != linea)
                    {
                        a[x][y] = ' ';
                        y++;
                        a[x][y]='o';
                    }
                }
            if(tecla == 'a')
                {
                    if(a[x][y-1] != linea)
                    {
                        a[x][y] = ' ';
                        y--;
                        a[x][y]='o';
                    }
                }
            system("cls");//para que se borre el laberinto anterior y la tecla metida para mover la bola

                    //imprimimos el nuevo laberinto (del mismo modo) con la posicion de la tecla añadida
                    for(i=x;i<x+4;i++)
                    {
                        for(j=y;j<y+6;j++)
                        {
                            printf("%c", a[i-1][j-3]);
                        }
                        printf("\n");
                    }
    }//fin del while

    system("cls");//limpia la pantalla para hacer todo otra vez y que no se acumulen los laberitos
}
