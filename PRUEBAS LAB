#include <stdio.h>
#include <stdlib.h>
#include <windows.h>

int main()
{
    char a[50][50]={"#############################",
                    "#o        #   ### ## ### ####",
                    "# ##### # # #  ##   ## ### ##",
                    "# #   # #  ### ### # # #    #",
                    "#   # #### # # # ###    # ###",
                    "##### #  # # #  ## ## ###   #",
                    "#   # # #  #  #    ##   ## ##",
                    "# # # ## # # # ## #####  # ##",
                    "# # # # ## #  # #   #    ## #",
                    "# #   ##        ### ###  # ##",
                    "# #####  # ##  ##   ##      #",
                    "#       ## ##             # #",
                    "# ######## # # # ###  #   # >",
                    "#     #  # #     #   ## # # #",
                    "##### #  # # # # ###  # # # #",
                    "#     #  # # #   ##  ## # # #",
                    "# # #        ### ## # # #  ##",
                    "# #   ###  ##       #    #  #",
                    "#############################",
                    };
    int x, y, i, j;
    char tecla;

    do
    {
        printf("mete un punto inicial del plano del laberinto (mayor que 0, menor que los limites del laberinto):\n");
        scanf("%i %i", &x, &y);
    }while(x <= 0 || y <= 0);


    system("cls");//borra la pantalla para que no se acumulen los puntos introducidos

    //imprimimos el laberinto con las condiciones iniciales
        //el 5 es nº de casillas q vemos en vertical
        //el 5 es el nº de casillas q vemos en horizontal
        for(i=x;i<x+5;i++)
        {
            for(j=y;j<y+5;j++)
                {
                    printf("%c", a[i][j]);
                }
            printf("\n");
        }

    //Esto va desplazando la pelota por el laberinto, mientras su posicion sea distinta de los extremos del lab (28 y 18) casillas
    while(x!=28 || y!= 18)
    {
        tecla=getch();//lo mismo que el scanf para caracteres

            //secuencia de movimientos de las teclas
            if(tecla == 's')
                {
                    if(a[x+1][y] != '#')
                    {
                        a[x][y] = ' ';
                        x++;
                        a[x][y]='o';
                    }
                }
            if(tecla == 'w')
                {
                    if(a[x-1][y] != '#')
                    {
                        a[x][y] = ' ';
                        x--;
                        a[x][y]='o';
                    }
                }
            if(tecla == 'd')
                {
                    if(a[x][y+1] != '#')
                    {
                        a[x][y] = ' ';
                        y++;
                        a[x][y]='o';
                    }
                }
            if(tecla == 'a')
                {
                    if(a[x][y-1] != '#')
                    {
                        a[x][y] = ' ';
                        y--;
                        a[x][y]='o';
                    }
                }
            system("cls");//para que se borre el laberinto anterior y la tecla metida para mover la bola

                    //imprimimos el nuevo laberinto (del mismo modo) con la posicion de la tecla añadida
                    for(i=x;i<x+5;i++)
                    {
                        for(j=y;j<y+5;j++)
                        {
                            printf("%c", a[i][j]);
                        }
                        printf("\n");
                    }
    }//fin del while

    system("cls");//limpia la pantalla para hacer todo otra vez y que no se acumulen los laberitos
}
